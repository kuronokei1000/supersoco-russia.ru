<?
$bCheckMaxVersion = false;
if($info = CModule::CreateModuleObject('aspro.max'))
{
	if(!CheckVersion('2.0.5', $info->MODULE_VERSION))
		$bCheckMaxVersion = true;
}

if($bCheckMaxVersion){
	\Bitrix\Main\Loader::includeModule('iblock');
	\Bitrix\Main\Loader::includeModule('catalog');
	\Bitrix\Main\Loader::includeModule('seo');
	
	$arMaxSeoClassses = [
		'Aspro\Max\Smartseo\General\Smartseo',
		'Aspro\Max\Smartseo\General\SmartseoEngine',
		'Aspro\Max\Smartseo\General\SmartseoEventHandler',
		'Aspro\Max\Smartseo\General\SmartseoInstall',
		'Aspro\Max\Smartseo\General\SmartseoNoindex',
		'Aspro\Max\Smartseo\Models\SmartseoFilterRuleTable',
		'Aspro\Max\Smartseo\Models\SmartseoFilterSectionTable',
		'Aspro\Max\Smartseo\Models\SmartseoFilterIblockSectionsTable',
		'Aspro\Max\Smartseo\Models\SmartseoSeoTemplateTable',
		'Aspro\Max\Smartseo\Models\SmartseoFilterConditionTable',
		'Aspro\Max\Smartseo\Models\SmartseoFilterConditionUrlTable',
		'Aspro\Max\Smartseo\Models\SmartseoSettingTable',
		'Aspro\Max\Smartseo\Models\SmartseoSitemapTable',
		'Aspro\Max\Smartseo\Models\SmartseoFilterSitemapTable',
		'Aspro\Max\Smartseo\Models\SmartseoFilterTagTable',
		'Aspro\Max\Smartseo\Models\SmartseoFilterTagItemTable',
		'Aspro\Max\Smartseo\Models\SmartseoFilterSearchTable',
		'Aspro\Max\Smartseo\Models\SmartseoSeoTextTable',
		'Aspro\Max\Smartseo\Models\SmartseoSeoTextIblockSectionsTable',
		'Aspro\Max\Smartseo\Models\SmartseoSeoTextPropertyTable',
		'Aspro\Max\Smartseo\Models\SmartseoNoindexUrlTable',
		'Aspro\Max\Smartseo\Models\SmartseoNoindexIblockSectionsTable',
		'Aspro\Max\Smartseo\Models\SmartseoNoindexConditionTable',
		'Aspro\Max\Smartseo\Models\SmartseoNoindexRuleTable',
		'Aspro\Max\Smartseo\Models\FieldLangTable',
		'Aspro\Max\Smartseo\Models\SmartseoIblockElementPropSingleTable',
		'Aspro\Max\Smartseo\Models\SmartseoSkuIblockElementPropSingleTable',
		'Aspro\Max\Smartseo\Models\SmartseoIblockElementPropMultipleTable',
		'Aspro\Max\Smartseo\Models\SmartseoSkuIblockElementPropMultipleTable',
		'Aspro\Max\Smartseo\Admin\Helper',
		'Aspro\Max\Smartseo\Admin\FrontController',
		'Aspro\Max\Smartseo\Admin\App\View',
		'Aspro\Max\Smartseo\Admin\App\Controller',
		'Aspro\Max\Smartseo\Admin\Controllers\FilterNavChainController',
		'Aspro\Max\Smartseo\Admin\Controllers\FilterRulesController',
		'Aspro\Max\Smartseo\Admin\Controllers\FilterSectionController',
		'Aspro\Max\Smartseo\Admin\Controllers\FilterRuleDetailController',
		'Aspro\Max\Smartseo\Admin\Controllers\FilterConditionController',
		'Aspro\Max\Smartseo\Admin\Controllers\FilterSitemapController',
		'Aspro\Max\Smartseo\Admin\Controllers\FilterUrlController',
		'Aspro\Max\Smartseo\Admin\Controllers\FilterTagController',
		'Aspro\Max\Smartseo\Admin\Controllers\FilterTagItemController',
		'Aspro\Max\Smartseo\Admin\Controllers\FilterSearchController',
		'Aspro\Max\Smartseo\Admin\Controllers\SettingController',
		'Aspro\Max\Smartseo\Admin\Controllers\SitemapController',
		'Aspro\Max\Smartseo\Admin\Controllers\SitemapDetailController',
		'Aspro\Max\Smartseo\Admin\Controllers\CustomEntityFilterController',
		'Aspro\Max\Smartseo\Admin\Controllers\SeoTextController',
		'Aspro\Max\Smartseo\Admin\Controllers\SeoTextSectionController',
		'Aspro\Max\Smartseo\Admin\Controllers\SeoTextElementController',
		'Aspro\Max\Smartseo\Admin\Controllers\NoindexRulesController',
		'Aspro\Max\Smartseo\Admin\Controllers\NoindexRuleDetailController',
		'Aspro\Max\Smartseo\Admin\Controllers\NoindexConditionController',
		'Aspro\Max\Smartseo\Admin\Grids\InnerGrid',
		'Aspro\Max\Smartseo\Admin\Grids\FilterRuleConditionGrid',
		'Aspro\Max\Smartseo\Admin\Grids\FilterRuleUrlGrid',
		'Aspro\Max\Smartseo\Admin\Grids\FilterRuleSitemapGrid',
		'Aspro\Max\Smartseo\Admin\Grids\FilterRuleTagGrid',
		'Aspro\Max\Smartseo\Admin\Grids\FilterRuleTagItemGrid',
		'Aspro\Max\Smartseo\Admin\Grids\FilterRuleSearchGrid',
		'Aspro\Max\Smartseo\Admin\Grids\SitemapConditionGrid',
		'Aspro\Max\Smartseo\Admin\Grids\NoindexRuleConditionGrid',
		'Aspro\Max\Smartseo\Admin\Traits\BitrixCoreEntity',
		'Aspro\Max\Smartseo\Admin\Traits\FilterChainSectionTree',
		'Aspro\Max\Smartseo\Admin\UI\AbstractAdminUI',
		'Aspro\Max\Smartseo\Admin\UI\FilterRulesAdminUI',
		'Aspro\Max\Smartseo\Admin\UI\FilterRuleConditionAdminUI',
		'Aspro\Max\Smartseo\Admin\UI\FilterRuleSitemapAdminUI',
		'Aspro\Max\Smartseo\Admin\UI\FilterRuleTagAdminUI',
		'Aspro\Max\Smartseo\Admin\UI\FilterRuleTagItemAdminUI',
		'Aspro\Max\Smartseo\Admin\UI\FilterRuleSearchAdminUI',
		'Aspro\Max\Smartseo\Admin\UI\SitemapAdminUI',
		'Aspro\Max\Smartseo\Admin\UI\SeoTextAdminUI',
		'Aspro\Max\Smartseo\Admin\UI\NoindexRuleAdminUI',
		'Aspro\Max\Smartseo\Admin\UI\FilterRuleUrlAdminUI',
		'Aspro\Max\Smartseo\Admin\UI\SitemapConditionAdminUI',
		'Aspro\Max\Smartseo\Admin\UI\NoindexRuleConditionAdminUI',
		'Aspro\Max\Smartseo\Admin\UI\SeoPropertyMenuUI',
		'Aspro\Max\Smartseo\Admin\UI\UrlPropertyMenuUI',
		'Aspro\Max\Smartseo\Admin\UI\FilterSearchSeoPropertyMenuUI',
		'Aspro\Max\Smartseo\Admin\UI\SettingMenuUI',
		'Aspro\Max\Smartseo\Admin\UI\SeoTextPropertyMenuUI',
		'Aspro\Max\Smartseo\Admin\Settings\SettingSmartseo',
		'Aspro\Max\Smartseo\Admin\Actions\Replication',
		'Aspro\Max\Smartseo\Entity\FilterRule',
		'Aspro\Max\Smartseo\Entity\FilterRules',
		'Aspro\Max\Smartseo\Entity\FilterTagItem',
		'Aspro\Max\Smartseo\Entity\FilterTagItems',
		'Aspro\Max\Smartseo\Entity\FilterSection',
		'Aspro\Max\Smartseo\Entity\FilterSections',
		'Aspro\Max\Smartseo\Entity\FilterIblockSection',
		'Aspro\Max\Smartseo\Entity\FilterIblockSections',
		'Aspro\Max\Smartseo\Entity\SeoTemplate',
		'Aspro\Max\Smartseo\Entity\SeoTemplates',
		'Aspro\Max\Smartseo\Entity\FilterCondition',
		'Aspro\Max\Smartseo\Entity\FilterConditionUrl',
		'Aspro\Max\Smartseo\Entity\FilterConditionUrls',
		'Aspro\Max\Smartseo\Template\Entity\FilterRule',
		'Aspro\Max\Smartseo\Template\Entity\FilterRuleCondition',
		'Aspro\Max\Smartseo\Template\Entity\FilterRuleIblockSections',
		'Aspro\Max\Smartseo\Template\Entity\FilterRuleConditionProperty',
		'Aspro\Max\Smartseo\Template\Entity\FilterRuleConditionPrice',
		'Aspro\Max\Smartseo\Template\Entity\FilterRuleUrl',
		'Aspro\Max\Smartseo\Template\Entity\FilterRuleUrlProperty',
		'Aspro\Max\Smartseo\Template\Entity\SeoText',
		'Aspro\Max\Smartseo\Template\Entity\SeoTextIblockSections',
		'Aspro\Max\Smartseo\Template\Entity\SeoTextElementProperties',
		'Aspro\Max\Smartseo\Template\Functions\Fabric',
		'Aspro\Max\Smartseo\Template\Functions\FunctionMorphology',
		'Aspro\Max\Smartseo\Template\Functions\FunctionUpperFirst',
		'Aspro\Max\Smartseo\Condition\ConditionTree',
		'Aspro\Max\Smartseo\Condition\ConditionQuery',
		'Aspro\Max\Smartseo\Condition\Entities\Iblock\Builder',
		'Aspro\Max\Smartseo\Condition\Entities\Iblock\Helper',
		'Aspro\Max\Smartseo\Condition\Entities\Iblock\IblockPropertyBuilder',
		'Aspro\Max\Smartseo\Condition\Entities\Iblock\IblockSkuPropertyBuilder',
		'Aspro\Max\Smartseo\Condition\Entities\Iblock2\Builder',
		'Aspro\Max\Smartseo\Condition\Entities\Iblock2\Helper',
		'Aspro\Max\Smartseo\Condition\Entities\Iblock2\IblockPropertyBuilder',
		'Aspro\Max\Smartseo\Condition\Entities\Iblock2\IblockSkuPropertyBuilder',
		'Aspro\Max\Smartseo\Condition\ConditionResult',
		'Aspro\Max\Smartseo\Condition\Controls\BuildControlsInterface',
		'Aspro\Max\Smartseo\Condition\Controls\GroupBuildControls',
		'Aspro\Max\Smartseo\Condition\Controls\GroupDefaultBuildControls',
		'Aspro\Max\Smartseo\Condition\Controls\IblockBuildControls',
		'Aspro\Max\Smartseo\Condition\Controls\IblockPropertyBuildControls',
		'Aspro\Max\Smartseo\Condition\Controls\CatalogGroupBuildControls',
		// 'Aspro\Max\Smartseo\Condition\Controls\Group2BuildControls',
		'Aspro\Max\Smartseo\LazyLoader\ElementProperty\ElementPropertyUserField',
		'Aspro\Max\Smartseo\LazyLoader\ElementProperty\ElementPropertyEnum',
		'Aspro\Max\Smartseo\LazyLoader\ElementProperty\ElementPropertyElement',
		'Aspro\Max\Smartseo\LazyLoader\ElementProperty\ElementPropertySection',
		'Aspro\Max\Smartseo\Generator\UrlGenerator',
		'Aspro\Max\Smartseo\Generator\Handlers\AbstractUrlHandler',
		'Aspro\Max\Smartseo\Generator\Handlers\SiteUrlHandler',
		'Aspro\Max\Smartseo\Generator\Handlers\SectionUrlHandler',
		'Aspro\Max\Smartseo\Generator\Handlers\PropertyUrlHandler',
		'Aspro\Max\Smartseo\Generator\Handlers\IblockUrlHandler',
		'Aspro\Max\Smartseo\Seo\SitemapFile',
		'Aspro\Max\Smartseo\Seo\SitemapIndex',
		'Aspro\Max\Smartseo\Seo\RobotsFile',
		'Aspro\Max\Smartseo\Engines\Engine',
		'Aspro\Max\Smartseo\Engines\SearchEngine',
		'Aspro\Max\Smartseo\Engines\SitemapEngine',
		'Aspro\Max\Smartseo\Engines\UrlEngine',
		'Aspro\Max\Smartseo\Engines\TagItemEngine',
		'Aspro\Max\Smartseo\Engines\UrlNoindexEngine',
		'Aspro\Max\Smartseo\Engines\SeoTextEngine',
		'Aspro\Max\Smartseo\Engines\SeoTextElementEngine',
		'Aspro\Max\Smartseo\Morphy\Morphology',
	];
	foreach ($arMaxSeoClassses as $maxClass) {
		$smartSeoClass = str_replace('\\Max\\', '\\', $maxClass);
		if (!class_exists($maxClass)) {
			class_alias($smartSeoClass, $maxClass);
		}
	}
}


?>