var AppMpMapSetting=BX.BitrixVue.createApp({data:()=>({config:{ajaxUrl:"/bitrix/tools/aspro.lite/marketplace/wb_detail.php",ajaxUrlPropValuesMatch:"",controller:"wildberries",sessid:"",iblockId:null,apiKey:null,clientId:null,externalSections:null,useSkuProps:!1},state:{map:{},sections:{},selectedSectionIds:[],propertySelectOptions:{},propertySkuSelectOptions:{}}}),mounted(){},computed:{ajaxUrl(){return this.config.ajaxUrl},ajaxUrlPropValuesMatch(){return this.config.ajaxUrlPropValuesMatch},controller(){return this.config.controller},sessid(){return this.config.sessid||""},iblockId(){return this.config.iblockId||""},apiKey(){return this.config.apiKey||""},clientId(){return this.config.clientId||""},externalSections(){return this.config.externalSections||""},useSkuProps(){return this.config.useSkuProps||!1},propertySelectOptions(){return this.state.propertySelectOptions},propertySkuSelectOptions(){return this.state.propertySkuSelectOptions}},methods:{setConfig(payload){"object"==typeof payload&&(this.config=Object.assign({},this.config,payload))},loadData(payload){this.$set(this.state,"sections",payload.sections||{}),this.$set(this.state,"propertySelectOptions",payload.propertySelectOptions||{}),this.$set(this.state,"propertySkuSelectOptions",payload.propertySkuSelectOptions||{}),payload.selectedSectionIds&&payload.selectedSectionIds.length&&this.$set(this.state,"selectedSectionIds",payload.selectedSectionIds),payload.map&&"object"==typeof payload.map&&Object.keys(payload.map).length&&this.$set(this.state,"map",payload.map)},updateMapSection(bxSectionId,wbSectionCode){this.state.map[bxSectionId]||this.$set(this.state.map,bxSectionId,{BX_SECTION:bxSectionId,WB_SECTION:"",PROPERTIES:[]}),this.state.map[bxSectionId].WB_SECTION=wbSectionCode},updateMapProperty(bxSectionId,bxPropertyCode,wbPropertyCode,wbDefaultValue,bxSkuPropertyCode){if(!this.state.map[bxSectionId]||!this.state.map[bxSectionId].WB_SECTION)return;let properties=this.state.map[bxSectionId].PROPERTIES;const findIndex=properties.findIndex(item=>item.WB_PROPERTY===wbPropertyCode);let property={BX_PROPERTY:bxPropertyCode||"",BX_SKU_PROPERTY:bxSkuPropertyCode||"",WB_PROPERTY:wbPropertyCode,DEFAULT_VALUE:wbDefaultValue||""};findIndex<0?properties.push(property):properties.splice(findIndex,1,property)},deleteMapSection(bxSectionId){this.state.map[bxSectionId]&&this.$delete(this.state.map,bxSectionId)}}});