var onCaptchaVerifyinvisible=function(response){$(".g-recaptcha:last").each((function(){var id;void 0!==$(this).attr("data-widgetid")&&response&&($(this).closest("form").find(".g-recaptcha-response").val()||$(this).closest("form").find(".g-recaptcha-response").val(response),$("iframe[src*=recaptcha]").length&&$("iframe[src*=recaptcha]").each((function(){var block=$(this).parent().parent();block.hasClass("grecaptcha-badge")||block.css("width","100%")})),"form_comment"==$(this).closest("form").attr("name")?BX.submit(BX("form_comment")):$(this).closest("form").submit())}))},onCaptchaVerifynormal=function(response){$(".g-recaptcha").each((function(){var id=$(this).attr("data-widgetid");void 0!==id&&""!=grecaptcha.getResponse(id)&&$(this).closest("form").find(".recaptcha").valid()}))};BX.addCustomEvent("onSubmitForm",(function(eventdata){try{if(!window.renderRecaptchaById||!window.asproRecaptcha||!window.asproRecaptcha.key)return eventdata.form.submit(),$(eventdata.form).closest(".form").addClass("sending"),!0;if("invisible"==window.asproRecaptcha.params.recaptchaSize&&"undefined"!=typeof grecaptcha){if(!$(eventdata.form).find(".g-recaptcha-response").val())return grecaptcha.execute($(eventdata.form).find(".g-recaptcha").data("widgetid")),!1;eventdata.form.submit(),$(eventdata.form).closest(".form").addClass("sending")}else eventdata.form.submit(),$(eventdata.form).closest(".form").addClass("sending");return!0}catch(e){return console.error(e),!0}})),$(document).on("click",".refresh",(function(e){var captcha=$(this).parents(".captcha-row");e.preventDefault(),$.ajax({url:arAsproOptions.SITE_DIR+"ajax/captcha.php"}).done((function(text){captcha.find("input[name=captcha_sid],input[name=captcha_code]").val(text),captcha.find("img").attr("src","/bitrix/tools/captcha.php?captcha_sid="+text),captcha.find("input[name=captcha_word]").val("").removeClass("error"),captcha.find(".captcha_input").removeClass("error").find(".error").remove()}))}));