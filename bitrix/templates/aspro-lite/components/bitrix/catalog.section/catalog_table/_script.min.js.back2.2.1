$(document).on("change","input#check_all_item",(function(){const buyItemsCount=$(".catalog-table__item .to_cart").length;$(this).is(":checked")&&buyItemsCount?($(".opt_action").addClass("animate-load").removeClass("no-action"),$(".opt_action .opt-buy__item-text").remove(),$('<div class="opt-buy__item-text">(<span>'+buyItemsCount+"</span>)</div>").appendTo($(".opt_action")),$('input[name="check_item"]').prop("checked","checked")):($(".opt_action").addClass("no-action"),$(".opt_action").removeClass("animate-load"),$(".opt_action .opt-buy__item-text").remove(),$('input[name="check_item"]').prop("checked",""))})),$(document).on("change","input[name='check_item']",(function(){const _this=$(this);_this.is(":checked")?$(".opt_action").each((function(){const _this=$(this);if(_this.find(".opt-buy__item-text").length){let count=parseInt(_this.find(".opt-buy__item-text span").text());_this.find(".opt-buy__item-text span").text(++count)}else _this.removeClass("no-action"),_this.addClass("animate-load"),$('<div class="opt-buy__item-text">(<span>1</span>)</div>').appendTo(_this)})):$(".opt_action").each((function(){const _this=$(this);if(_this.find(".opt-buy__item-text").length){let count=parseInt(_this.find(".opt-buy__item-text span").text());--count,_this.find(".opt-buy__item-text span").text(count),count||(_this.addClass("no-action"),_this.removeClass("animate-load"),_this.find(".opt-buy__item-text").remove())}}))})),$(document).on("click",".opt_action",(function(){const _this=$(this),action=_this.data("action"),basketParams={action:action,type:"multiple",is_ajax_post:"Y",state:1,IBLOCK_ID:_this.data("iblock_id"),SITE_ID:BX.message("SITE_ID"),lang:BX.message("LANGUAGE_ID"),sessid:BX.bitrix_sessid(),items:[]};_this.hasClass("no-action")||setTimeout((function(){var items2add=[];let $items=$("input[name=check_item]:checked").closest(".catalog-table__item");if($items.length)for(let i=0,c=$items.length;i<c;++i){let $item=$items.eq(i),$basketAction=$item.find('.item-action [data-action="'+JItemActionBasket.prototype.action+'"]'),bAdd;if("compare"===action||"favorite"===action||"basket"===action&&$basketAction.length){items2add.push($item.find(".catalog-table__info")[0]);let data=$item.find(".catalog-table__info").data("item");if(void 0!==data&&data){let item=data.ID;if("basket"===action){let quantity=0,$counter=$item.find(".counter__count");$counter.length&&(quantity=$counter.val()),quantity<=0&&$basketAction.length&&(quantity=$basketAction.data("quantity")),quantity<=0&&(quantity=1),item={ID:data.ID,IBLOCK_ID:data.IBLOCK_ID,QUANTITY:quantity}}basketParams.items.push(item)}}}basketParams.items.length&&$.ajax({url:JItemAction.prototype.requestUrl,type:"POST",dataType:"json",sessid:BX.bitrix_sessid(),data:basketParams}).done((function(data){data.success&&("compare"===action?(arAsproCounters.COMPARE.ITEMS=data.items,arAsproCounters.COMPARE.COUNT=data.count,arAsproCounters.COMPARE.TITLE=data.title,JItemActionCompare.markItems(),JItemActionCompare.markBadges(),JNoticeSurface.get().onAdd2Compare(items2add,!0)):"favorite"===action?(arAsproCounters.FAVORITE.ITEMS=data.items,arAsproCounters.FAVORITE.COUNT=data.count,arAsproCounters.FAVORITE.TITLE=data.title,JItemActionFavorite.markItems(),JItemActionFavorite.markBadges(),JNoticeSurface.get().onAdd2Favorite(items2add,!0)):"basket"===action&&(arAsproCounters.BASKET.ITEMS=data.items,arAsproCounters.BASKET.COUNT=data.count,arAsproCounters.BASKET.TITLE=data.title,JItemActionBasket.markItems(),JItemActionBasket.markBadges(),JNoticeSurface.get().onAdd2Cart(items2add)))})).fail((function(xhr){console.error(xhr),JNoticeSurface.get().onRequestError(xhr)}))}),0)})),$(document).ready((function(){if(!location.hash&&("scrollRestoration"in history&&(history.scrollRestoration="manual"),"undefined"!=typeof arAsproOptions&&arAsproOptions.OID)){let url,oid;BX.browser.IsIE()?(url=parseUrlQuery(),oid=arAsproOptions.OID?url[arAsproOptions.OID]:null):(url=new URL(window.location),oid=arAsproOptions.OID?url.searchParams.get(arAsproOptions.OID):null),oid&&scrollToBlock('[data-id="'+oid+'"]')}})),BX.addCustomEvent("onCompleteAction",(function(eventdata){"ajaxContentLoaded"===eventdata.action&&"object"==typeof window.tableScrollerOb&&window.tableScrollerOb&&window.tableScrollerOb.toggle()}));
//# sourceMappingURL=script.min.js.map