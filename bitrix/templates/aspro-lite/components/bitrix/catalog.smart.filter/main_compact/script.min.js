if(!window.JCSmartFilterBinds){function setHtmlToBlock(html,block){$(block).html($(html).find(block).html())}$(document).ready((function(){$(document).on("click",".bx_filter.compact .bx_filter_parameters_box_title .delete_filter",(function(e){var _this=$(this);_this.closest(".bx_filter_parameters_box").find("input[type=text]").val(""),_this.closest(".bx_filter_parameters_box").removeClass("set"),_this.closest(".bx_filter_parameters_box").find(".pict label").removeClass("active"),e.stopPropagation();var t=!1;_this.closest(".bx_filter_parameters_box").find("input").each((function(){var __this=this;$(__this).prop("checked",!1),"text"==$(__this).attr("type")&&$(__this).val(""),t&&clearTimeout(t),t=setTimeout((function(){smartFilter.reload(__this)}),100)})).promise().done((function(){this.ajaxMode||setTimeout((function(){_this.closest("form").find(".bx_filter_button_box.hidden .bx_filter_search_button").click()}),800)}))})),$(document).on("click",".bx_filter.compact .bx_filter_block",(function(e){e.stopPropagation()})),$(document).on("click",".bx_filter_button_box .bx_filter_search_reset",(function(e){$(this).addClass("hidden"),$(".bx_filter_search_reset.btn-link-text").click()})),$(document).on("click",".bx_filter_block .bx_filter_button_box .btn",(function(){this.ajaxMode||$(this).closest("form").find(".bx_filter_search_button").click()})),$(".bx_filter input[type=text]").numeric({allow:"."}),window.JCSmartFilterBinds=!0}))}function JCSmartFilter(ajaxURL,viewMode,params){this.ajaxURL=ajaxURL,this.form=null,this.timer=null,this.cacheKey="",this.cache=[],this.viewMode=viewMode,this.ajaxMode=params.AJAX,params&&(this.params=params),params&&(params.SEF_SET_FILTER_URL?(this.bindUrlToButton("set_filter",params.SEF_SET_FILTER_URL),this.sef=!0):this.bindUrlToButton("set_filter",this.ajaxURL),params.SEF_DEL_FILTER_URL?this.bindUrlToButton("del_filter",params.SEF_DEL_FILTER_URL):this.bindUrlToButton("del_filter",this.ajaxURL))}JCSmartFilter.prototype.keyup=function(input){this.timer&&clearTimeout(this.timer),$(input).hasClass("disabled")||(this.timer=setTimeout(BX.delegate((function(){this.reload(input)}),this),500))},JCSmartFilter.prototype.click=function(checkbox){this.timer&&clearTimeout(this.timer),this.timer=setTimeout(BX.delegate((function(){this.reload(checkbox)}),this),500)},JCSmartFilter.prototype.deleteProperty=function(input){},JCSmartFilter.prototype.reload=function(input){var inStockCheck=!0===$(input).closest(".bx_filter_parameters_box").data("check_prop_inline");if(this.StockProp=inStockCheck,this.ajaxMode&&$(".js-load-wrapper .ajax_load").length&&$(".js-load-wrapper .ajax_load").addClass("loading-state-before"),void 0!==this.cacheKey&&""!==this.cacheKey)return this.timer&&clearTimeout(this.timer),void(this.timer=setTimeout(BX.delegate((function(){this.reload(input)}),this),1e3));this.cacheKey="|";var isSelecBox=!1;if(isSelecBox=$(input).closest(".bx_filter_select_container").length,this.position_input=0,this.label_input=$("label[data-role=label_"+$(input).attr("id").replace("all_","")+"]"),isSelecBox&&(this.label_input=$(input).closest(".bx_filter_select_container")),this.label_input.length&&(this.position_input=this.label_input.offset().top-this.label_input.height()/2,this.label_input.hasClass("nab")&&(this.position_input+=7),isSelecBox&&(this.position_input+=10)),this.position=BX.pos(input,!0),this.form=BX.findParent(input,{tag:"form"}),this.form){var values=[];values[0]={name:"ajax",value:"y"},this.gatherInputsValues(values,BX.findChildren(this.form,{tag:new RegExp("^(input|select)$","i")},!0)),$(".bx_filter_parameters_box").removeClass("opened");for(var i=0;i<values.length;i++)this.cacheKey+=values[i].name+":"+values[i].value+"|",$("input[name="+values[i].name+"]").closest(".bx_filter_parameters_box").addClass("opened");if(this.cache&&this.cache[this.cacheKey])this.values2post(values),BX.ajax.loadJSON(this.ajaxURL,this.values2post(values),BX.delegate((function(){}),this)),this.curFilterinput=input,this.postHandler(this.cache[this.cacheKey],!0);else{if(this.sef)var set_filter=BX("set_filter");this.curFilterinput=input,BX.ajax.loadJSON(this.ajaxURL,this.values2post(values),BX.delegate(this.postHandler,this))}}var i=0;$(input).closest(".bx_filter_block").find("input[type=checkbox], input[type=radio]").each((function(){!0===$(this).prop("checked")&&++i})).promise().done((function(){0!=i?$(input).closest(".bx_filter_parameters_box").find(".bx_filter_parameters_box_title .count_selected").text(": "+i):$(input).closest(".bx_filter_parameters_box").find(".bx_filter_parameters_box_title .count_selected").text("")}))},JCSmartFilter.prototype.updateItem=function(PID,arItem){if("N"===arItem.PROPERTY_TYPE||arItem.PRICE){var trackBar=window["trackBar"+PID];!trackBar&&arItem.ENCODED_ID&&(trackBar=window["trackBar"+arItem.ENCODED_ID]),trackBar&&arItem.VALUES&&(arItem.VALUES.MIN&&(arItem.VALUES.MIN.FILTERED_VALUE?trackBar.setMinFilteredValue(arItem.VALUES.MIN.FILTERED_VALUE):trackBar.setMinFilteredValue(arItem.VALUES.MIN.VALUE)),arItem.VALUES.MAX&&(arItem.VALUES.MAX.FILTERED_VALUE?trackBar.setMaxFilteredValue(arItem.VALUES.MAX.FILTERED_VALUE):trackBar.setMaxFilteredValue(arItem.VALUES.MAX.VALUE)))}else if(arItem.VALUES)for(var i in arItem.VALUES)if(arItem.VALUES.hasOwnProperty(i)){var value=arItem.VALUES[i],control=BX(value.CONTROL_ID);if(control){var label=document.querySelector('[data-role="label_'+value.CONTROL_ID+'"]');input=document.querySelector('[id="'+value.CONTROL_ID+'"]'),value.DISABLED?label?(BX.addClass(label,"disabled"),input&&(input.setAttribute("disabled","disabled"),BX.addClass(input,"disabled"))):BX.addClass(control.parentNode,"disabled"):label?(BX.removeClass(label,"disabled"),input&&(input.removeAttribute("disabled"),BX.removeClass(input,"disabled"))):BX.removeClass(control.parentNode,"disabled"),value.hasOwnProperty("ELEMENT_COUNT")&&(label=document.querySelector('[data-role="count_'+value.CONTROL_ID+'"]'))&&(label.innerHTML=value.ELEMENT_COUNT)}}},JCSmartFilter.prototype.filterCatalog=function(url,set_disabled,reset,count){window.History.enabled||null!=window.history.pushState?window.history.pushState(null,document.title,url):location.href=url,$.ajax({url:url,type:"GET",data:{ajax_get:"Y",ajax_get_filter:"Y"},success:function(html){if(setHtmlToBlock(html,".top-content-block"),reset?setHtmlToBlock(html,".js-load-wrapper"):(setHtmlToBlock(html,".js-load-wrapper  .inner_wrapper"),setHtmlToBlock(html,".filter-panel__sort"),setHtmlToBlock(html,".toggle-panel"),$(html).find(".filter_title").hasClass("active-filter")?($(".filter_title").addClass("active-filter"),$(".bx_filter_search_reset ").removeClass("hidden")):($(".filter_title").removeClass("active-filter"),$(".bx_filter_search_reset ").addClass("hidden"))),reset&&$("#mobilefilter .bx_filter").length&&($("#mobilefilter").html(""),$(html).find(".bx_filter").appendTo($("#mobilefilter")),$("#mobilefilter .bx_filter_parameters").addClass("scrollbar"),smartFilter.params&&(smartFilter.params.SEF_SET_FILTER_URL?smartFilter.bindUrlToButton("set_filter",smartFilter.params.SEF_SET_FILTER_URL):smartFilter.bindUrlToButton("set_filter",smartFilter.ajaxURL),smartFilter.params.SEF_DEL_FILTER_URL?smartFilter.bindUrlToButton("del_filter",smartFilter.params.SEF_DEL_FILTER_URL):smartFilter.bindUrlToButton("del_filter",smartFilter.ajaxURL)),mobileFilterNum($(".bottom_nav").data("count"))),$(".fast_view_frame").remove(),BX.onCustomEvent("onAjaxSuccessFilter"),"Y"==set_disabled){var set_filter=BX("set_filter"),reset_filter=BX("del_filter");set_filter&&(set_filter.disabled=!1),reset_filter&&(reset_filter.disabled=!1)}var eventdata={action:"jsLoadBlock"};BX.onCustomEvent("onCompleteAction",[eventdata,this]),$(".js-load-wrapper .ajax_load").length&&$(".js-load-wrapper .ajax_load").removeClass("loading-state-before")}})},JCSmartFilter.prototype.postHandler=function(result,fromCache){var hrefFILTER,url,curProp,modef=BX("modef"),modef_mobile=BX("modef_mobile"),modef_num=BX("modef_num"),modef_num_mobile=BX("modef_num_mobile"),set_filter;if(result&&result.ITEMS){for(var PID in result.ITEMS)result.ITEMS.hasOwnProperty(PID)&&this.updateItem(PID,result.ITEMS[PID]);modef&&modef_num&&(this.ajaxMode||(this.position_input?$("#modef").css({top:this.position_input-$(".smartfilter").offset().top}):$("#modef").css({top:"auto"}),modef_num.innerHTML=result.ELEMENT_COUNT,$(".bx_filter.compact .bx_filter_button_box .bx_filter_container_modef span").html(result.ELEMENT_COUNT),$(".bx_filter.compact .bx_filter_button_box").show()),modef_num_mobile.innerHTML=result.ELEMENT_COUNT,"function"==typeof mobileFilterNum&&mobileFilterNum(result.ELEMENT_COUNT),hrefFILTER=BX.findChildren(modef,{tag:"A"},!0),hrefFILTER_mobile=BX.findChildren(modef_mobile,{tag:"A"},!0),result.FILTER_URL&&hrefFILTER&&(hrefFILTER[0].href=BX.util.htmlspecialcharsback(result.FILTER_URL.replace("/filter/clear/apply/","/")),hrefFILTER_mobile[0].href=BX.util.htmlspecialcharsback(result.FILTER_URL.replace("/filter/clear/apply/","/"))),result.FILTER_AJAX_URL&&result.COMPONENT_CONTAINER_ID&&(BX.unbindAll(hrefFILTER[0]),BX.unbindAll(hrefFILTER_mobile[0]),BX.bind(hrefFILTER[0],"click",(function(e){return url=BX.util.htmlspecialcharsback(result.FILTER_AJAX_URL),BX.ajax.insertToNode(url,result.COMPONENT_CONTAINER_ID),BX.PreventDefault(e)}))),result.INSTANT_RELOAD&&result.COMPONENT_CONTAINER_ID?(url=BX.util.htmlspecialcharsback(result.FILTER_AJAX_URL),BX.ajax.insertToNode(url,result.COMPONENT_CONTAINER_ID)):(url=BX.util.htmlspecialcharsback(result.FILTER_AJAX_URL),this.ajaxMode?this.filterCatalog(url,"N",this.reset,result.ELEMENT_COUNT):("none"===modef.style.display&&(modef.style.display="inline-block",modef_mobile.style.display="inline-block"),"vertical"==this.viewMode&&(curProp=BX.findChild(BX.findParent(this.curFilterinput,{class:"bx_filter_parameters_box"}),{class:"bx_filter_container_modef"},!0,!1)).appendChild(modef)),result.FILTER_URL&&this.bindUrlToButton("set_filter",BX.util.htmlspecialcharsback(result.FILTER_URL)),result.SEF_SET_FILTER_URL&&this.bindUrlToButton("set_filter",result.SEF_SET_FILTER_URL)))}this.sef&&(BX("set_filter").disabled=!1);fromCache||""===this.cacheKey||(this.cache[this.cacheKey]=result),this.cacheKey="",this.StockProp&&window.matchMedia("(min-width: 768px)").matches&&!this.ajaxMode&&$(".bx_filter .bx_filter_button_box.hidden .bx_filter_search_button").click()},JCSmartFilter.prototype.bindUrlToButton=function(buttonId,url){var button=BX(buttonId);if(button){var proxy=function(j,func){return function(){return func(j)}};"submit"==button.type&&(button.type="button"),button.dataset.url=url,BX.unbindAll(button),BX.bind(button,"click",BX.proxy((function(){const url=button.dataset.url;return this.ajaxMode?"del_filter"===button.id&&this.filterCatalog(url,"Y","Y"):window.location.href=url,!1}),this))}},JCSmartFilter.prototype.gatherInputsValues=function(values,elements){if(elements)for(var i=0;i<elements.length;i++){var el=elements[i];if(el.type)switch(el.type.toLowerCase()){case"text":case"textarea":case"password":case"hidden":case"select-one":el.value.length&&(values[values.length]={name:el.name,value:el.value});break;case"radio":case"checkbox":el.checked&&(values[values.length]={name:el.name,value:el.value});break;case"select-multiple":for(var j=0;j<el.options.length;j++)el.options[j].selected&&(values[values.length]={name:el.name,value:el.options[j].value})}}},JCSmartFilter.prototype.values2post=function(values){for(var post=[],current=post,i=0;i<values.length;){var p=values[i].name.indexOf("[");if(-1==p)current[values[i].name]=values[i].value,current=post,i++;else{var name=values[i].name.substring(0,p),rest=values[i].name.substring(p+1);current[name]||(current[name]=[]);var pp=rest.indexOf("]");-1==pp?(current=post,i++):0==pp?(current=current[name],values[i].name=""+current.length):(current=current[name],values[i].name=rest.substring(0,pp)+rest.substring(pp+1))}}return"q"in post&&delete post.q,"s"in post&&delete post.s,post},JCSmartFilter.prototype.hideFilterProps=function(element){var obj=element.parentNode,filterBlock=obj.querySelector("[data-role='bx_filter_block']"),propAngle=obj.querySelector("[data-role='prop_angle']");if(BX.hasClass(obj,"bx-active"))new BX.easing({duration:300,start:{opacity:1,height:filterBlock.offsetHeight},finish:{opacity:0,height:0},transition:BX.easing.transitions.quart,step:function(state){filterBlock.style.opacity=state.opacity,filterBlock.style.height=state.height+"px"},complete:function(){filterBlock.setAttribute("style",""),BX.removeClass(obj,"bx-active")}}).animate(),BX.addClass(propAngle,"fa-angle-down"),BX.removeClass(propAngle,"fa-angle-up");else{filterBlock.style.display="block",filterBlock.style.opacity=0,filterBlock.style.height="auto";var obj_children_height=filterBlock.offsetHeight;filterBlock.style.height=0,new BX.easing({duration:300,start:{opacity:0,height:0},finish:{opacity:1,height:obj_children_height},transition:BX.easing.transitions.quart,step:function(state){filterBlock.style.opacity=state.opacity,filterBlock.style.height=state.height+"px"},complete:function(){}}).animate(),BX.addClass(obj,"bx-active"),BX.removeClass(propAngle,"fa-angle-down"),BX.addClass(propAngle,"fa-angle-up")}},JCSmartFilter.prototype.showDropDownPopup=function(element,popupId){var contentNode=element.querySelector('[data-role="dropdownContent"]'),offset=$(element).offset();BX.PopupWindowManager.create("smartFilterDropDown"+popupId,element,{autoHide:!0,offsetLeft:0,offsetTop:0,overlay:!1,draggable:{restrict:!0},closeByEsc:!0,content:contentNode}).show(),$(element).toggleClass("opened"),$("#smartFilterDropDown"+popupId).insertAfter($(element).closest(".bx_filter_parameters_box_container")),$("#smartFilterDropDown"+popupId).addClass("dropdown-menu-wrapper").css({top:"auto",left:"auto"}),$("#smartFilterDropDown"+popupId+" .popup-window-content").addClass("dropdown-menu-inner rounded-x scrollbar scrolled ")},JCSmartFilter.prototype.selectDropDownItem=function(element,controlId){var wrapContainer,currentOption;BX.hasClass(element,"disabled")||(this.keyup(BX(controlId)),BX.findParent(BX(controlId),{className:"bx_filter_select_container"},!1).querySelector('[data-role="currentOption"]').innerHTML=element.innerHTML,$(element).closest(".bx_filter_select_popup").find("label").removeClass("dropdown-menu-item--current active"),BX.addClass(element,"dropdown-menu-item--current active"),BX.PopupWindowManager.getCurrentPopup().close())},BX.namespace("BX.Iblock.SmartFilter"),BX.Iblock.SmartFilter=function(){var SmartFilter=function(arParams){"object"==typeof arParams&&(this.leftSlider=BX(arParams.leftSlider),this.rightSlider=BX(arParams.rightSlider),this.tracker=BX(arParams.tracker),this.trackerWrap=BX(arParams.trackerWrap),this.minInput=BX(arParams.minInputId),this.maxInput=BX(arParams.maxInputId),this.minPrice=parseFloat(arParams.minPrice),this.maxPrice=parseFloat(arParams.maxPrice),this.curMinPrice=parseFloat(arParams.curMinPrice),this.curMaxPrice=parseFloat(arParams.curMaxPrice),this.fltMinPrice=arParams.fltMinPrice?parseFloat(arParams.fltMinPrice):parseFloat(arParams.curMinPrice),this.fltMaxPrice=arParams.fltMaxPrice?parseFloat(arParams.fltMaxPrice):parseFloat(arParams.curMaxPrice),this.precision=arParams.precision||0,this.priceDiff=this.maxPrice-this.minPrice,this.leftPercent=arParams.leftPercent?parseFloat(arParams.leftPercent):0,this.rightPercent=arParams.rightPercent?parseFloat(arParams.rightPercent):0,this.fltMinPercent=0,this.fltMaxPercent=0,this.colorUnavailableActive=BX(arParams.colorUnavailableActive),this.colorAvailableActive=BX(arParams.colorAvailableActive),this.colorAvailableInactive=BX(arParams.colorAvailableInactive),this.isTouch=!1,this.init(),"ontouchstart"in document.documentElement||"ontouchstart"in window?(this.isTouch=!0,BX.bind(this.leftSlider,"touchstart",BX.proxy((function(event){this.onMoveLeftSlider(event)}),this)),BX.bind(this.rightSlider,"touchstart",BX.proxy((function(event){this.onMoveRightSlider(event)}),this)),BX.bind(this.colorAvailableActive,"touchstart",BX.proxy((function(event){this.onChangeLeftSlider(event)}),this)),BX.bind(this.colorUnavailableActive,"touchstart",BX.proxy((function(event){this.onChangeLeftSlider(event)}),this)),BX.bind(this.colorAvailableInactive,"touchstart",BX.proxy((function(event){this.onChangeLeftSlider(event)}),this))):(BX.bind(this.leftSlider,"mousedown",BX.proxy((function(event){this.onMoveLeftSlider(event)}),this)),BX.bind(this.rightSlider,"mousedown",BX.proxy((function(event){this.onMoveRightSlider(event)}),this)),BX.bind(this.colorAvailableActive,"mousedown",BX.proxy((function(event){this.onChangeLeftSlider(event)}),this)),BX.bind(this.colorUnavailableActive,"mousedown",BX.proxy((function(event){this.onChangeLeftSlider(event)}),this)),BX.bind(this.colorAvailableInactive,"mousedown",BX.proxy((function(event){this.onChangeLeftSlider(event)}),this))),BX.bind(this.minInput,"keyup",BX.proxy((function(event){this.onInputChange()}),this)),BX.bind(this.maxInput,"keyup",BX.proxy((function(event){this.onInputChange()}),this)))};return SmartFilter.prototype.init=function(){var priceDiff;this.curMinPrice>this.minPrice&&(priceDiff=this.curMinPrice-this.minPrice,this.leftPercent=100*priceDiff/this.priceDiff,this.leftSlider.style.left=this.leftPercent+"%",this.colorUnavailableActive.style.left=this.leftPercent+"%"),this.setMinFilteredValue(this.fltMinPrice),this.curMaxPrice<this.maxPrice&&(priceDiff=this.maxPrice-this.curMaxPrice,this.rightPercent=100*priceDiff/this.priceDiff,this.rightSlider.style.right=this.rightPercent+"%",this.colorUnavailableActive.style.right=this.rightPercent+"%"),this.setMaxFilteredValue(this.fltMaxPrice)},SmartFilter.prototype.setMinFilteredValue=function(fltMinPrice){if(this.fltMinPrice=parseFloat(fltMinPrice),this.fltMinPrice>=this.minPrice){var priceDiff=this.fltMinPrice-this.minPrice;this.fltMinPercent=100*priceDiff/this.priceDiff,this.leftPercent>this.fltMinPercent?this.colorAvailableActive.style.left=this.leftPercent+"%":this.colorAvailableActive.style.left=this.fltMinPercent+"%",this.colorAvailableInactive.style.left=this.fltMinPercent+"%"}else this.colorAvailableActive.style.left="0%",this.colorAvailableInactive.style.left="0%"},SmartFilter.prototype.setMaxFilteredValue=function(fltMaxPrice){if(this.fltMaxPrice=parseFloat(fltMaxPrice),this.fltMaxPrice<=this.maxPrice){var priceDiff=this.maxPrice-this.fltMaxPrice;this.fltMaxPercent=100*priceDiff/this.priceDiff,this.rightPercent>this.fltMaxPercent?this.colorAvailableActive.style.right=this.rightPercent+"%":this.colorAvailableActive.style.right=this.fltMaxPercent+"%",this.colorAvailableInactive.style.right=this.fltMaxPercent+"%"}else this.colorAvailableActive.style.right="0%",this.colorAvailableInactive.style.right="0%"},SmartFilter.prototype.getXCoord=function(elem){var box=elem.getBoundingClientRect(),body=document.body,docElem=document.documentElement,scrollLeft=window.pageXOffset||docElem.scrollLeft||body.scrollLeft,clientLeft=docElem.clientLeft||body.clientLeft||0,left=box.left+scrollLeft-clientLeft;return Math.round(left)},SmartFilter.prototype.getPageX=function(e){e=e||window.event;var pageX=null;if(this.isTouch&&null!=e.targetTouches[0])pageX=e.targetTouches[0].pageX;else if(null!=e.pageX)pageX=e.pageX;else if(null!=e.clientX){var html=document.documentElement,body=document.body;pageX=e.clientX+(html.scrollLeft||body&&body.scrollLeft||0),pageX-=html.clientLeft||0}return pageX},SmartFilter.prototype.recountMinPrice=function(){var newMinPrice=this.priceDiff*this.leftPercent/100;(newMinPrice=(this.minPrice+newMinPrice).toFixed(this.precision))!=this.minPrice?this.minInput.value=newMinPrice:this.minInput.value="",smartFilter.keyup(this.minInput)},SmartFilter.prototype.recountMaxPrice=function(){var newMaxPrice=this.priceDiff*this.rightPercent/100;(newMaxPrice=(this.maxPrice-newMaxPrice).toFixed(this.precision))!=this.maxPrice?this.maxInput.value=newMaxPrice:this.maxInput.value="",smartFilter.keyup(this.maxInput)},SmartFilter.prototype.onInputChange=function(){var priceDiff;if(this.minInput.value){var leftInputValue=this.minInput.value;leftInputValue<this.minPrice&&(leftInputValue=this.minPrice),leftInputValue>this.maxPrice&&(leftInputValue=this.maxPrice),priceDiff=leftInputValue-this.minPrice,this.leftPercent=100*priceDiff/this.priceDiff,this.makeLeftSliderMove(!1)}if(this.maxInput.value){var rightInputValue=this.maxInput.value;rightInputValue<this.minPrice&&(rightInputValue=this.minPrice),rightInputValue>this.maxPrice&&(rightInputValue=this.maxPrice),priceDiff=this.maxPrice-rightInputValue,this.rightPercent=100*priceDiff/this.priceDiff,this.makeRightSliderMove(!1)}},SmartFilter.prototype.makeLeftSliderMove=function(recountPrice){recountPrice=!1!==recountPrice,this.leftSlider.style.left=this.leftPercent+"%",this.colorUnavailableActive.style.left=this.leftPercent+"%";var areBothSlidersMoving=!1;this.leftPercent+this.rightPercent>=100&&(areBothSlidersMoving=!0,this.rightPercent=100-this.leftPercent,this.rightSlider.style.right=this.rightPercent+"%",this.colorUnavailableActive.style.right=this.rightPercent+"%"),this.leftPercent>=this.fltMinPercent&&this.leftPercent<=100-this.fltMaxPercent?(this.colorAvailableActive.style.left=this.leftPercent+"%",areBothSlidersMoving&&(this.colorAvailableActive.style.right=100-this.leftPercent+"%")):this.leftPercent<=this.fltMinPercent?(this.colorAvailableActive.style.left=this.fltMinPercent+"%",areBothSlidersMoving&&(this.colorAvailableActive.style.right=100-this.fltMinPercent+"%")):this.leftPercent>=this.fltMaxPercent&&(this.colorAvailableActive.style.left=100-this.fltMaxPercent+"%",areBothSlidersMoving&&(this.colorAvailableActive.style.right=this.fltMaxPercent+"%")),recountPrice&&(this.recountMinPrice(),areBothSlidersMoving&&this.recountMaxPrice())},SmartFilter.prototype.countNewLeft=function(event){var pageX=this.getPageX(event),trackerXCoord=this.getXCoord(this.trackerWrap),rightEdge=this.trackerWrap.offsetWidth,newLeft=pageX-trackerXCoord;return newLeft<0?newLeft=0:newLeft>rightEdge&&(newLeft=rightEdge),newLeft},SmartFilter.prototype.onMoveLeftSlider=function(e){if(this.isTouch||(this.leftSlider.ondragstart=function(){return!1}),$(".bx_filter .bx_filter_parameters_box_container input").prop("disabled",!1),this.isTouch){var onMoveFunction=BX.proxy((function(event){this.leftPercent=100*this.countNewLeft(event)/this.trackerWrap.offsetWidth,this.makeLeftSliderMove()}),this),onEndFunction=BX.proxy((function(event){window.removeEventListener("touchmove",onMoveFunction,!1),window.removeEventListener("touchend",onEndFunction,!1),onMoveFunction=onEndFunction=null}),this);window.addEventListener("touchmove",onMoveFunction,!1),window.addEventListener("touchend",onEndFunction,!1)}else document.onmousemove=BX.proxy((function(event){this.leftPercent=100*this.countNewLeft(event)/this.trackerWrap.offsetWidth,this.makeLeftSliderMove()}),this),document.onmouseup=function(){document.onmousemove=document.onmouseup=null};return!1},SmartFilter.prototype.makeRightSliderMove=function(recountPrice){recountPrice=!1!==recountPrice,this.rightSlider.style.right=this.rightPercent+"%",this.colorUnavailableActive.style.right=this.rightPercent+"%";var areBothSlidersMoving=!1;this.leftPercent+this.rightPercent>=100&&(areBothSlidersMoving=!0,this.leftPercent=100-this.rightPercent,this.leftSlider.style.left=this.leftPercent+"%",this.colorUnavailableActive.style.left=this.leftPercent+"%"),100-this.rightPercent>=this.fltMinPercent&&this.rightPercent>=this.fltMaxPercent?(this.colorAvailableActive.style.right=this.rightPercent+"%",areBothSlidersMoving&&(this.colorAvailableActive.style.left=100-this.rightPercent+"%")):this.rightPercent<=this.fltMaxPercent?(this.colorAvailableActive.style.right=this.fltMaxPercent+"%",areBothSlidersMoving&&(this.colorAvailableActive.style.left=100-this.fltMaxPercent+"%")):100-this.rightPercent<=this.fltMinPercent&&(this.colorAvailableActive.style.right=100-this.fltMinPercent+"%",areBothSlidersMoving&&(this.colorAvailableActive.style.left=this.fltMinPercent+"%")),recountPrice&&(this.recountMaxPrice(),areBothSlidersMoving&&this.recountMinPrice())},SmartFilter.prototype.onMoveRightSlider=function(e){if(this.isTouch||(this.rightSlider.ondragstart=function(){return!1}),$(".bx_filter .bx_filter_parameters_box_container input").prop("disabled",!1),this.isTouch){var onMoveFunction=BX.proxy((function(event){this.rightPercent=100-100*this.countNewLeft(event)/this.trackerWrap.offsetWidth,this.makeRightSliderMove()}),this),onEndFunction=BX.proxy((function(event){window.removeEventListener("touchmove",onMoveFunction,!1),window.removeEventListener("touchend",onEndFunction,!1),onMoveFunction=onEndFunction=null}),this);window.addEventListener("touchmove",onMoveFunction,!1),window.addEventListener("touchend",onEndFunction,!1)}else document.onmousemove=BX.proxy((function(event){this.rightPercent=100-100*this.countNewLeft(event)/this.trackerWrap.offsetWidth,this.makeRightSliderMove()}),this),document.onmouseup=function(){document.onmousemove=document.onmouseup=null};return!1},SmartFilter.prototype.onChangeLeftSlider=function(e){if(this.isTouch||(this.leftSlider.ondragstart=function(){}),this.isTouch){var percent=100*this.countNewLeft(e)/this.trackerWrap.offsetWidth;if($(e.target).is(".bx_ui_slider_handle"))return;percent<50?(this.leftPercent=percent,this.makeLeftSliderMove()):(this.rightPercent=100-percent,this.makeRightSliderMove())}else{var percent=100*this.countNewLeft(event)/this.trackerWrap.offsetWidth;if($(event.target).is(".bx_ui_slider_handle")||!$(event.target).is("[class^=bx_ui_slider]"))return;percent<50?(this.leftPercent=percent+1,this.makeLeftSliderMove()):(this.rightPercent=100-percent,this.makeRightSliderMove()),document.onmouseup=function(){document.onmousemove=document.onmouseup=null}}return!1},SmartFilter}();
//# sourceMappingURL=script.min.js.map